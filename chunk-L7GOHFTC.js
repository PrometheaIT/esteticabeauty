import{a as P}from"./chunk-QJCLSYZ6.js";import{c as S}from"./chunk-UYQORTRZ.js";import"./chunk-V3BUYYL4.js";import{b as O,c as E,d as A,e as k,f as L,g as I,n as T,o as N}from"./chunk-SVEG3QM4.js";import{j as y,m as w}from"./chunk-MPIGBUTJ.js";import{Aa as a,Qa as v,Va as p,_ as m,bb as d,cb as n,db as e,eb as b,f as h,kb as c,mb as x,tb as i,ub as C,vb as M,xb as u,yb as f,zb as _}from"./chunk-BIDTVNE2.js";function W(o,r){o&1&&(n(0,"span",4),i(1,"login"),e())}function D(o,r){o&1&&b(0,"span",19)}function j(o,r){if(o&1&&(n(0,"div",20)(1,"span",4),i(2,"error"),e(),n(3,"span"),i(4),e()()),o&2){let s=x();a(4),C(s.error)}}var z=class o{auth=m(P);router=m(S);email="";password="";error="";loading=!1;onSubmit(){return h(this,null,function*(){this.loading=!0,this.error="";try{let r=yield this.auth.login(this.email,this.password);r.success?this.router.navigate(["/admin/dashboard"]):this.error=r.error||"Credenziali non valide"}catch(r){this.error="Errore di connessione al server",console.error("Login error:",r)}finally{this.loading=!1}})}goToHome(){this.router.navigate(["/home"])}static \u0275fac=function(s){return new(s||o)};static \u0275cmp=v({type:o,selectors:[["app-admin-login"]],decls:33,vars:7,consts:[[1,"login-container"],[1,"card","login-card"],[1,"login-header"],[1,"promethea-button","ghost","back-button",3,"click"],[1,"material-icons"],[1,"login-title"],[1,"section-title"],[1,"sottotitolo"],[1,"grid-form","login-form",3,"ngSubmit"],[1,"form-field"],[1,"form-label"],["type","email","name","email","placeholder","Inserisci la tua email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Inserisci la password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"promethea-button","login-button",3,"disabled"],["class","material-icons",4,"ngIf"],["class","spinner",4,"ngIf"],["class","alert-error",4,"ngIf"],[1,"login-footer"],[1,"text-muted"],[1,"spinner"],[1,"alert-error"]],template:function(s,t){s&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),c("click",function(){return t.goToHome()}),n(4,"span",4),i(5,"arrow_back"),e(),i(6," Torna al sito "),e(),n(7,"div",5)(8,"h1",6),i(9,"Accesso Amministrazione"),e(),n(10,"p",7),i(11,"Area riservata per la gestione dei servizi e promozioni"),e()()(),n(12,"form",8),c("ngSubmit",function(){return t.onSubmit()}),n(13,"div",9)(14,"label",10)(15,"span",4),i(16,"email"),e(),i(17," Email "),e(),n(18,"input",11),_("ngModelChange",function(l){return f(t.email,l)||(t.email=l),l}),e()(),n(19,"div",9)(20,"label",10)(21,"span",4),i(22,"lock"),e(),i(23," Password "),e(),n(24,"input",12),_("ngModelChange",function(l){return f(t.password,l)||(t.password=l),l}),e()(),n(25,"button",13),p(26,W,2,0,"span",14)(27,D,1,0,"span",15),i(28),e(),p(29,j,5,1,"div",16),e(),n(30,"div",17)(31,"p",18),i(32,"Se hai problemi di accesso, contatta l'assistenza."),e()()()()),s&2&&(a(18),u("ngModel",t.email),a(6),u("ngModel",t.password),a(),d("disabled",t.loading||!t.email||!t.password),a(),d("ngIf",!t.loading),a(),d("ngIf",t.loading),a(),M(" ",t.loading?"Accesso in corso...":"Accedi"," "),a(),d("ngIf",t.error))},dependencies:[w,y,N,I,O,E,A,T,L,k],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:var(--background);padding:var(--gutter-md)}.login-card[_ngcontent-%COMP%]{max-width:70%;width:100%;padding:var(--gutter-xl)}.login-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;margin-bottom:var(--gutter-xl);gap:var(--gutter-lg)}.back-button[_ngcontent-%COMP%]{align-self:flex-start}.login-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm)}.login-title[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-align:center;border-left:none;justify-content:center;margin:0}.login-form[_ngcontent-%COMP%]{gap:var(--gutter-lg)}.login-button[_ngcontent-%COMP%]{width:100%;margin-top:var(--gutter-sm)}.alert-error[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 10%,transparent);border:1px solid #ef4444;color:#ef4444;padding:var(--gutter-md);border-radius:12px;display:flex;align-items:center;gap:var(--gutter-sm);font-size:var(--fs-sm);font-weight:500}.alert-error[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--gutter-xl);padding-top:var(--gutter-lg);border-top:1px solid var(--smoke-color-1)}.spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]{padding:var(--gutter-sm)}.login-card[_ngcontent-%COMP%]{padding:var(--gutter-lg)}.login-header[_ngcontent-%COMP%]{margin-bottom:var(--gutter-lg)}.back-button[_ngcontent-%COMP%]{align-self:center}}"]})};export{z as AdminLogin};
