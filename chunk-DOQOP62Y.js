import{a as H}from"./chunk-3QBGKM2D.js";import{d as L}from"./chunk-UYQORTRZ.js";import{a as D}from"./chunk-V3BUYYL4.js";import{j as N,l as T,m as g}from"./chunk-MPIGBUTJ.js";import{Aa as s,Bb as z,Db as I,Fa as E,Qa as u,Va as y,_ as P,bb as h,cb as o,da as S,db as t,ea as b,eb as C,f,fb as a,gb as p,hb as M,kb as O,lb as l,mb as x,rb as k,tb as e,ub as w,vb as d}from"./chunk-BIDTVNE2.js";var v=class c{promotion;targetServiceName="";closed=new E;constructor(){document.body.classList.add("popup-open")}ngOnDestroy(){document.body.classList.remove("popup-open")}getPromotionText(r){return r.discount_type==="percentage"?`Sconto ${r.discount_amount}%`:`Sconto ${r.discount_amount}\u20AC`}getPromotionScope(){return this.promotion.target_type==="all"?"Su tutti i servizi":this.promotion.target_type==="service"&&this.targetServiceName?`Sul servizio: ${this.targetServiceName}`:"Promozione speciale"}close(){document.body.classList.remove("popup-open"),this.closed.emit()}static \u0275fac=function(n){return new(n||c)};static \u0275cmp=u({type:c,selectors:[["app-promo-popup"]],inputs:{promotion:"promotion",targetServiceName:"targetServiceName"},outputs:{closed:"closed"},decls:36,vars:12,consts:[[1,"popup-overlay",3,"click"],[1,"popup-content","card",3,"click"],[1,"close-btn","action-btn","delete",3,"click"],[1,"material-icons"],[1,"popup-header"],[1,"popup-icon"],[1,"popup-title","section-title"],[1,"popup-body"],[1,"promo-name"],[1,"promo-discount"],[1,"promo-scope","chip"],[1,"promo-description","text-muted"],[1,"promo-validity","chip"],[1,"popup-actions"],[1,"promethea-button",3,"click"],[1,"promethea-button","ghost",3,"click"]],template:function(n,i){n&1&&(a(0,"div",0),l("click",function(){return i.close()}),a(1,"div",1),l("click",function(_){return _.stopPropagation()}),a(2,"button",2),l("click",function(){return i.close()}),a(3,"span",3),e(4,"close"),p()(),a(5,"div",4)(6,"div",5)(7,"span",3),e(8,"local_offer"),p()(),a(9,"h2",6)(10,"span",3),e(11,"local_offer"),p(),e(12," Promozione Speciale! "),p()(),a(13,"div",7)(14,"h3",8),e(15),p(),a(16,"div",9),e(17),p(),a(18,"div",10)(19,"span",3),e(20),p(),e(21),p(),a(22,"p",11),e(23," Approfitta di questa offerta speciale per prenderti cura di te "),p(),a(24,"div",12)(25,"span",3),e(26,"event"),p(),e(27),z(28,"date"),p()(),a(29,"div",13)(30,"button",14),l("click",function(){return i.close()}),a(31,"span",3),e(32,"spa"),p(),e(33," Scopri i servizi "),p(),a(34,"button",15),l("click",function(){return i.close()}),e(35," Chiudi "),p()()()()),n&2&&(s(15),w(i.promotion.name),s(2),d(" ",i.getPromotionText(i.promotion)," "),s(),k("badge-primary",i.promotion.target_type==="all")("badge-secondary",i.promotion.target_type==="service"),s(2),d(" ",i.promotion.target_type==="all"?"all_inclusive":"spa"," "),s(),d(" ",i.getPromotionScope()," "),s(6),d(" Valida fino al ",I(28,9,i.promotion.end_date,"dd/MM/yyyy")," "))},dependencies:[g,T],styles:[".popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#051800d9;display:flex;align-items:center;justify-content:center;z-index:10000;padding:var(--gutter-md);box-sizing:border-box;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.popup-content[_ngcontent-%COMP%]{max-width:500px;width:100%;max-height:90vh;overflow-y:auto;position:relative;animation:_ngcontent-%COMP%_slideUp .4s cubic-bezier(.175,.885,.32,1.275);margin:0}.popup-content.card[_ngcontent-%COMP%]{border:2px solid var(--primary);box-shadow:0 25px 50px #00000080!important}.close-btn[_ngcontent-%COMP%]{position:absolute;top:var(--gutter-md);right:var(--gutter-md);z-index:10}.popup-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--gutter-lg)}.popup-icon[_ngcontent-%COMP%]{background:var(--gradiente);width:70px;height:70px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto var(--gutter-md);box-shadow:0 4px 12px var(--shadow2)}.popup-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#fff;font-size:32px}.popup-title[_ngcontent-%COMP%]{text-align:center;justify-content:center;border-left:none;margin-bottom:0}.popup-title[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--primary)}.popup-body[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--gutter-lg)}.promo-name[_ngcontent-%COMP%]{font-size:var(--fs-md);color:var(--text-color);margin-bottom:var(--gutter-md);font-weight:600;line-height:1.3}.promo-discount[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;color:var(--secondary);margin-bottom:var(--gutter-md);text-shadow:2px 2px 4px rgba(0,0,0,.1);line-height:1.2;background:linear-gradient(45deg,var(--secondary),var(--primary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.promo-description[_ngcontent-%COMP%]{margin-bottom:var(--gutter-lg);line-height:1.5}.promo-validity.chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--gutter-sm);background:var(--smoke-color-1);padding:var(--gutter-sm) var(--gutter-md)}.popup-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);flex-direction:column;margin-top:var(--gutter-lg)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}@media (max-width: 768px){.popup-overlay[_ngcontent-%COMP%]{padding:var(--gutter-sm)}.popup-content[_ngcontent-%COMP%]{max-height:85vh}.popup-icon[_ngcontent-%COMP%]{width:60px;height:60px}.popup-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:28px}.promo-discount[_ngcontent-%COMP%]{font-size:2rem}.close-btn[_ngcontent-%COMP%]{top:var(--gutter-sm);right:var(--gutter-sm)}}body.popup-open[_ngcontent-%COMP%]{overflow:hidden}.promo-scope[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--gutter-sm);margin-bottom:var(--gutter-md);padding:var(--gutter-sm) var(--gutter-md)}.promo-scope.badge-primary[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 18%,transparent);border:1px solid var(--primary);color:var(--text-color)}.promo-scope.badge-secondary[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--secondary) 18%,transparent);border:1px solid var(--secondary);color:var(--text-color)}"]})};function R(c,r){if(c&1){let n=M();o(0,"app-promo-popup",18),O("closed",function(){S(n);let m=x();return b(m.closePopup())}),t()}if(c&2){let n=x();h("promotion",n.activePromotion)("targetServiceName",n.targetServiceName)}}var V=class c{promotionsService=P(H);supabaseService=P(D);activePromotion=null;targetServiceName="";showPopup=!1;services=[];ngOnInit(){return f(this,null,function*(){try{this.services=yield this.supabaseService.getServices(),this.activePromotion=yield this.promotionsService.getActivePromotion(),this.activePromotion&&(this.targetServiceName=yield this.getTargetServiceName(this.activePromotion),localStorage.getItem("closedPromotionId")!==this.activePromotion.id&&setTimeout(()=>{this.showPopup=!0},1e3))}catch(r){console.error("Errore caricamento promozioni:",r)}})}getTargetServiceName(r){return f(this,null,function*(){if(r.target_type==="service"&&r.target_id){let n=this.services.find(i=>i.id===r.target_id);if(n)return n.title;try{let m=(yield this.supabaseService.getAllServices()).find(_=>_.id===r.target_id);return m?m.title:"Servizio specifico"}catch(i){return console.error("Errore nel caricamento del servizio target:",i),"Servizio specifico"}}return""})}closePopup(){this.showPopup=!1,this.activePromotion?.id&&localStorage.setItem("closedPromotionId",this.activePromotion.id)}testPopup(){this.showPopup=!0}static \u0275fac=function(n){return new(n||c)};static \u0275cmp=u({type:c,selectors:[["app-home"]],decls:58,vars:1,consts:[[3,"promotion","targetServiceName","closed",4,"ngIf"],[1,"page-container"],[1,"section-header"],[1,"header-icon"],[1,"material-icons"],[1,"section-titles"],[1,"section-title"],[1,"text-muted"],[1,"hero-buttons"],["routerLink","/services",1,"promethea-button"],["routerLink","/about",1,"promethea-button","outline"],[1,"hero-image"],[1,"services"],[1,"services-grid"],[1,"service-card"],[1,"material-icons","service-icon"],[1,"cta"],["routerLink","/prenota",1,"promethea-button"],[3,"closed","promotion","targetServiceName"]],template:function(n,i){n&1&&(y(0,R,1,2,"app-promo-popup",0),o(1,"div",1)(2,"section",2)(3,"div",3)(4,"span",4),e(5,"local_library"),t()(),o(6,"div",5)(7,"h1",6),e(8,"Benessere, Bellezza, Relax"),t(),o(9,"p",7),e(10,"Trattamenti professionali per viso, corpo e unghie."),t(),o(11,"div",8)(12,"a",9),e(13,"Scopri i Servizi"),t(),o(14,"a",10),e(15,"Prenota Ora"),t()()(),C(16,"div",11),t(),o(17,"section",12)(18,"h1"),e(19,"I nostri servizi"),t(),o(20,"div",13)(21,"div",14)(22,"span",15),e(23,"spa"),t(),o(24,"h3"),e(25,"Massaggi"),t(),o(26,"p"),e(27,"Rilassanti, decontratturanti e rigeneranti."),t()(),o(28,"div",14)(29,"span",15),e(30,"content_cut"),t(),o(31,"h3"),e(32,"Manicure"),t(),o(33,"p"),e(34,"Trattamenti mani e ricostruzione unghie professionale."),t()(),o(35,"div",14)(36,"span",15),e(37,"pedal_bike"),t(),o(38,"h3"),e(39,"Pedicure"),t(),o(40,"p"),e(41,"Cura del piede estetica e curativa."),t()(),o(42,"div",14)(43,"span",15),e(44,"face_retouching_natural"),t(),o(45,"h3"),e(46,"Trattamenti Viso"),t(),o(47,"p"),e(48,"Percorsi personalizzati per illuminare e ringiovanire."),t()()()(),o(49,"section",16)(50,"h2"),e(51,"Prenota il tuo momento di relax"),t(),o(52,"p"),e(53,"Contattaci per una seduta personalizzata."),t(),o(54,"a",17)(55,"span",4),e(56,"calendar_month"),t(),e(57," Prenota ora "),t()()()),n&2&&h("ngIf",i.showPopup&&i.activePromotion)},dependencies:[g,N,L,v],encapsulation:2})};export{V as Home};
