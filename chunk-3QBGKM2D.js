import{a as c}from"./chunk-V3BUYYL4.js";import{V as s,_ as n,f as r}from"./chunk-BIDTVNE2.js";var m=class a{supabase;constructor(){let e=n(c);this.supabase=e.supabase}getActivePromotion(){return r(this,null,function*(){let e=new Date().toISOString().split("T")[0],{data:t,error:o}=yield this.supabase.from("promotions").select("*").eq("active",!0).lte("start_date",e).gte("end_date",e).maybeSingle();if(o)throw o;return t})}getAllPromotions(){return r(this,null,function*(){let{data:e,error:t}=yield this.supabase.from("promotions").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]})}createPromotion(e){return r(this,null,function*(){let{data:t,error:o}=yield this.supabase.from("promotions").insert([e]).select().single();if(o)throw o;return t})}updatePromotion(e,t){return r(this,null,function*(){let{data:o,error:i}=yield this.supabase.from("promotions").update(t).eq("id",e).select().single();if(i)throw i;return o})}deletePromotion(e){return r(this,null,function*(){let{error:t}=yield this.supabase.from("promotions").delete().eq("id",e);if(t)throw t})}deactivateOtherPromotions(e){return r(this,null,function*(){let{error:t}=yield this.supabase.from("promotions").update({active:!1}).neq("id",e);if(t)throw t})}static \u0275fac=function(t){return new(t||a)};static \u0275prov=s({token:a,factory:a.\u0275fac,providedIn:"root"})};export{m as a};
